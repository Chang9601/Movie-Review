<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
	<th:block th:replace="~{include/layout :: body(~{this :: main})}">
		<main class="main" th:fragment="main">
			<div class="container">
					<div class="card m-2">
						<form>
							<div class="card-header">사이트 영화검색</div>							
							<div class="list-group">
								<input type="text" name="query-db" id="query-db" placeholder="리뷰를 작성하시고 싶은 영화를 검색하세요." class="form-control">
								<span id="db-ck"></span>
							</div>						
						</form>	
						<!-- <a th:href="@{/movie/searchMovieDB}" class="btn btn-warning">검색</a> -->
						<button id="btn-movie-db" class="btn btn-primary">검색</button>
					</div>
					<div class="card m-2">					
						<form>
							<div class="card-header">외부 영화검색</div>							
							<div class="list-group">
								<input type="text" name="query-api" id="query-api" placeholder="찾으시는 영화가 없으면 검색하세요." class="form-control">
								<span id="api-ck"></span>
							</div>	
						</form>
						<button id="btn-movie-api" class="btn btn-primary">검색</button>	
					</div>													
				<th:block th:each="movie : ${movies}">
					<div class="card m-2">
						<div class="card-body">
							<h4 th:if="${movie.image} != ''" class="card-title"><img th:src="${movie.image}" width="300" height="400"></h4>		
							<h4 th:unless="${movie.image} != ''" class="card-title"><img th:src="@{/img/none.png}" width="300" height="400"></h4>		
							<h4 class="card-title" th:text="${movie.title}"></h4>												
 							<!--<h4 class="card-title"><a th:href="@{${movie.link}}" target="_blank">네이버 링크</a></h4>-->
							<h4 class="card-title" th:text="${movie.cast}"></h4>
							<h4 class="card-title" th:text="${movie.plot}"></h4>						
							<h4 class="card-title"><a th:href="@{/rev/write/{num}(num=${movie.num})}" class="btn btn-primary">리뷰쓰기</a></h4>
						</div>
					</div>
				</th:block>
				<ul class="pagination d-flex justify-content-center">
					<li class="page-item" th:if="${page.pre} == true"><a 
						th:href="@{/?currentPageNum={currentPageNum} (currentPageNum=${page.beginNumOfPage-1 })}"
						class="page-link" aria-label="Pmovieious"> <span
							aria-hidden="true"> <span class="lnr lnr-chevron-left">이전</span>
						</span>
					</a>
					</li>
					<th:block th:with="start=${page.beginNumOfPage}, end=${page.endNumOfPage}">
						<li class="page-item"
							th:with="start=${page.beginNumOfPage}, end=${page.endNumOfPage}"
							th:each="pageButton : ${#numbers.sequence(start,end)}"><a 
							class="page-link"
							th:href="@{/?currentPageNum={currentPageNum} (currentPageNum=${pageButton})}" th:text=${pageButton}></a>
						</li>
					</th:block>
					<li class="page-item" th:if="${page.nxt} == true"><a
						th:href="@{/?currentPageNum={currentPageNum} (currentPageNum=${page.endNumOfPage+1 })}" class="page-link"
						aria-label="Next"> <span aria-hidden="true"> <span
								class="lnr lnr-chevron-right">다음</span>
						</span>
					</a></li>
				</ul>
			</div>
		</main>
</html>